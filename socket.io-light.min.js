(function(e){function h(b){var a;a=""+b.type;null!=b.data&&(a+=JSON.stringify(b.data));return a}function k(a){var c={};try{c=JSON.parse(a)}catch(d){console.log(d)}return c}if("undefined"===typeof e.WebSocket)throw"The browser does not seem to support web sockets";if("undefined"!==typeof e.io)throw"window.io already defined";e.io=function(a,c){return e.io.connect(a,c)};var a=e.io;a.socket=null;a.eventListeners=[];a.on=function(b,c){a.eventListeners.push({evtName:b,callback:c})};a.eventReceiver=function(b){for(var c=
0;c<a.eventListeners.length;c++)b&&b.data&&"undefined"!=typeof b.data.shift&&a.eventListeners[c].evtName==b.data[0]&&a.eventListeners[c].callback(b.data[1])};a.eventDispatcher=function(b){a.eventReceiver(k(b.data))};a.emit=function(b,c){var d={type:2,data:[b,c]};a.socket.readyState==a.socket.OPEN&&a.socket.send(h(d))};a.connect=function(b,c){b="string"===typeof b?b:location.protocol+"//"+location.host+"/socket.io";var d=document.createElement("a");d.href=b;var g=new XMLHttpRequest;g.open("GET",d.protocol+
"//"+d.host+d.pathname+"/?EIO=3&transport=polling&t="+(new Date).getTime()+"-0",!0);g.responseType="arraybuffer";g.onreadystatechange=function(){if(4==g.readyState&&200==g.status){for(var b=new Uint8Array(g.response),e="",f={},f=0;"{"!=String.fromCharCode(b[f])&&f<b.length;)f++;for(;f<b.length;)e+=String.fromCharCode(b[f]),f++;f=JSON.parse(e);chat.sid=f.sid;a.socket=new WebSocket("ws://"+d.host+d.pathname+"/?EIO=3&transport=websocket&sid="+chat.sid);a.socket.onopen=function(){a.socket.send("5");a.socket.onmessage=
a.eventDispatcher;"function"===typeof c&&setTimeout(c,0)}}};g.send();return a}})(window);
