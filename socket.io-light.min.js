(function(f){function h(b){var a="";if("object"!==typeof b||!b.type||!b.data||"object"!==typeof b.data)return a;a+=b.type;a+=JSON.stringify(b.data);return"4"+a}function k(a){var c={},d=0;if("string"!==typeof a||0>a.indexOf("["))return c;for(;"["!==a[d]&&d<a.length;)d++;try{c=JSON.parse(a.substring(d))}catch(g){console.log(g)}return c}if("undefined"===typeof f.WebSocket)throw"The browser does not seem to support web sockets";if("undefined"!==typeof f.io)throw"window.io already defined";f.io=function(a,
c){return f.io.connect(a,c)};var a=f.io;a.socket=null;a.eventListeners=[];a.on=function(b,c){a.eventListeners.push({evtName:b,callback:c})};a.eventReceiver=function(b){for(var c=0;c<a.eventListeners.length;c++)b&&"undefined"!==typeof b.shift&&a.eventListeners[c].evtName===b[0]&&a.eventListeners[c].callback(b[1])};a.eventDispatcher=function(b){a.eventReceiver(k(b.data))};a.emit=function(b,c){var d={type:2,data:[b,c]};a.socket.readyState===a.socket.OPEN&&a.socket.send(h(d))};a.ping=function(){a.socket.send("4ping")};
a.connect=function(b,c){b="string"===typeof b?b:location.protocol+"//"+location.host+"/socket.io";var d=document.createElement("a");d.href=b;var g=new XMLHttpRequest;g.open("GET",d.protocol+"//"+d.host+d.pathname+"/?EIO=3&transport=polling&t="+(new Date).getTime()+"-0",!0);g.responseType="arraybuffer";g.onreadystatechange=function(){if(4===g.readyState&&200===g.status){for(var b=new Uint8Array(g.response),f="",e={},e=0;"{"!==String.fromCharCode(b[e])&&e<b.length;)e++;for(;e<b.length;)f+=String.fromCharCode(b[e]),
e++;e=JSON.parse(f);a.sid=e.sid;a.socket=new WebSocket("ws://"+d.host+d.pathname+"/?EIO=3&transport=websocket&sid="+a.sid);a.socket.pingInterval=setInterval(a.ping,e.pingInterval);a.socket.onopen=function(){a.socket.send("5");a.socket.onmessage=a.eventDispatcher;"function"===typeof c&&setTimeout(c,0)}}};g.send();return a}})(window);
