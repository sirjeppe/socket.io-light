(function(d){function h(b){var a;a=""+b.type;null!=b.data&&(a+=JSON.stringify(b.data));return a}function k(a){try{JSON.parse(a)}catch(c){console.log(c)}}if("undefined"===typeof d.WebSocket)throw"The browser does not seem to support web sockets";if("undefined"!==typeof d.io)throw"window.io already defined";d.io=function(a,c){return d.io.connect(a,c)};var a=d.io;a.socket=null;a.eventListeners=[];a.on=function(b,c){a.eventListeners.push({evtName:b,callback:c})};a.eventReceiver=function(b){for(var c=
0;c<a.eventListeners.length;c++)b&&b.data&&"undefined"!=typeof b.data.shift&&a.eventListeners[c].evtName==b.data[0]&&a.eventListeners[c].callback(b.data[1])};a.eventDispatcher=function(b){a.eventReceiver(k(b.data))};a.emit=function(b,c){var f={type:2,data:[b,c]};a.socket.readyState==a.socket.OPEN&&a.socket.send(h(f))};a.connect=function(b,c){b="string"===typeof b?b:location.protocol+"//"+location.host+"/socket.io";var f=document.createElement("a");f.href=b;var g=new XMLHttpRequest;g.open("GET",f.protocol+
"//"+f.host+f.pathname+"/?EIO=3&transport=polling&t="+(new Date).getTime()+"-0",!0);g.responseType="arraybuffer";g.onreadystatechange=function(){if(4==g.readyState&&200==g.status){for(var b=new Uint8Array(g.response),d="",e={},e=0;"{"!=String.fromCharCode(b[e])&&e<b.length;)e++;for(;e<b.length;)d+=String.fromCharCode(b[e]),e++;e=JSON.parse(d);chat.sid=e.sid;a.socket=new WebSocket("ws://"+f.host+f.pathname+"/?EIO=3&transport=websocket&sid="+chat.sid);a.socket.onopen=function(){a.socket.send("5");a.socket.onmessage=
a.eventDispatcher;"function"===typeof c&&setTimeout(c,0)}}};g.send();return a}})(window);
